import streamlit as st
import pandas as pd

# Load cleaned data
df = pd.read_csv("../data/processed/dailyclimate_cleaned.csv")

# Display basic info about the data
st.title("Climate Vulnerability Analysis")
st.write("This page shows the vulnerability analysis based on various climate factors.")

# Vulnerability criteria (e.g., high temperature or precipitation)
high_temp_threshold = df['Temp_2m'].quantile(0.95)  # 95th percentile of temperature
high_precip_threshold = df['Precip'].quantile(0.95)  # 95th percentile of precipitation

# Filter regions that exceed these thresholds
high_temp_areas = df[df['Temp_2m'] > high_temp_threshold]
high_precip_areas = df[df['Precip'] > high_precip_threshold]

st.subheader("Regions Vulnerable to High Temperature")
st.write(high_temp_areas[['Date', 'District', 'Temp_2m']])

st.subheader("Regions Vulnerable to High Precipitation")
st.write(high_precip_areas[['Date', 'District', 'Precip']])

# You could also plot the vulnerability over time
st.line_chart(df.groupby('Date')['Temp_2m'].mean(), use_container_width=True)
st.line_chart(df.groupby('Date')['Precip'].mean(), use_container_width=True)
